@if (article) {
<!-- Custom Header -->
<div class="flex items-center gap-3 mb-6 p-1">
    @if (article.color?.primary) {
    <div class="w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0"
        [style.background-color]="article.color?.primary">
        <i class="pi pi-recycle text-white"></i>
    </div>
    }
    <div>
        <h2 class="text-xl font-bold m-0">{{ article.title }}</h2>
        @if (article.category) {
        <p class="text-[var(--text-1)] text-xs m-0">{{ article.category }}</p>
        }
    </div>
    <!-- Close Button -->
    <button
        class="ml-auto w-8 h-8 rounded-full hover:bg-[var(--bg-2)] flex items-center justify-center transition-colors text-[var(--text-1)]"
        (click)="close()">
        <i class="pi pi-times"></i>
    </button>
</div>

<!-- Hero Image -->
<div class="relative h-48 -mx-6 -mt-6 mb-6 overflow-hidden bg-[var(--bg-2)]">
    <img [src]="getImageUrl(article)" [alt]="article.title" class="w-full h-full object-cover">
</div>

<!-- Excerpt -->
@if (article.excerpt) {
<p class="text-lg text-[var(--text-0)] mb-6 leading-relaxed">{{ article.excerpt }}</p>
}

<div class="space-y-6 mb-8">
    <!-- Allowed Items -->
    @if (article.allowed && article.allowed.length > 0) {
    <div class="bg-green-500/10 border border-green-500/20 rounded-xl p-5">
        <h3 class="font-semibold text-lg mb-3 flex items-center gap-2 text-green-400">
            <i class="pi pi-check-circle"></i>
            Får sorteras här
        </h3>
        <ul class="space-y-2">
            @for (item of article.allowed; track item) {
            <li class="flex items-start gap-2 text-[var(--text-0)]">
                <i class="pi pi-check text-green-400 mt-1 flex-shrink-0"></i>
                <span>{{ item }}</span>
            </li>
            }
        </ul>
    </div>
    }

    <!-- Not Allowed Items -->
    @if (article.not_allowed && article.not_allowed.length > 0) {
    <div class="bg-red-500/10 border border-red-500/20 rounded-xl p-5">
        <h3 class="font-semibold text-lg mb-3 flex items-center gap-2 text-red-400">
            <i class="pi pi-times-circle"></i>
            Får INTE sorteras här
        </h3>
        <ul class="space-y-2">
            @for (item of article.not_allowed; track item) {
            <li class="flex items-start gap-2 text-[var(--text-0)]">
                <i class="pi pi-times text-red-400 mt-1 flex-shrink-0"></i>
                <span>{{ item }}</span>
            </li>
            }
        </ul>
    </div>
    }

    <!-- Tips -->
    @if (article.tips && article.tips.length > 0) {
    <div class="bg-blue-500/10 border border-blue-500/20 rounded-xl p-5">
        <h3 class="font-semibold text-lg mb-3 flex items-center gap-2 text-blue-400">
            <i class="pi pi-lightbulb"></i>
            Praktiska tips
        </h3>
        <ul class="space-y-2">
            @for (tip of article.tips; track tip) {
            <li class="flex items-start gap-2 text-[var(--text-0)]">
                <i class="pi pi-arrow-right text-blue-400 mt-1 flex-shrink-0"></i>
                <span>{{ tip }}</span>
            </li>
            }
        </ul>
    </div>
    }

    <!-- Why Text / Environmental Impact -->
    @if (article.why_text) {
    <div class="bg-[var(--accent-soft)] border border-[var(--accent-0)]/20 rounded-xl p-5">
        <h3 class="font-semibold text-lg mb-3 flex items-center gap-2 text-[var(--accent-0)]">
            <i class="pi pi-globe"></i>
            Därför är det viktigt
        </h3>
        <p class="text-[var(--text-0)] leading-relaxed">{{ article.why_text }}</p>
    </div>
    }
</div>

<div class="flex justify-end gap-2">
    <p-button label="Stäng" (onClick)="close()" severity="secondary"></p-button>
    <p-button routerLink="/stationer" label="Hitta station" (onClick)="close()" severity="primary">
        <i class="pi pi-map-marker"></i>
    </p-button>
</div>
}