<div class="h-full overflow-y-auto">
    <!-- Hero Image -->
    @if (article.image_url) {
    <div class="relative h-48 md:h-64 overflow-hidden">
        <img [src]="'https://sopinfo.se/' + article.image_url" [alt]="article.title" class="w-full h-full object-cover">
        <div class="absolute inset-0 bg-gradient-to-t from-[var(--bg-1)] to-transparent"></div>

        <!-- Close button on image -->
        @if (showFooter) {
        <button
            class="absolute top-4 right-4 w-10 h-10 rounded-full bg-black/50 hover:bg-black/70 flex items-center justify-center transition-colors backdrop-blur-sm"
            (click)="onClose()">
            <i class="pi pi-times text-white"></i>
        </button>
        }
    </div>
    }

    <!-- Header -->
    <div class="p-4 md:p-6 border-b border-[var(--border-0)]">
        <div class="flex items-start justify-between gap-4">
            <div class="flex-grow">
                <div class="flex items-center gap-3 mb-2">
                    @if (article.color?.primary) {
                    <div class="w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center flex-shrink-0"
                        [style.background-color]="article.color?.primary">
                        <i class="pi pi-recycle text-white text-lg md:text-xl"></i>
                    </div>
                    }
                    <div>
                        <h2 class="text-xl md:text-2xl font-bold">{{ article.title }}</h2>
                        @if (article.category) {
                        <p class="text-[var(--text-1)] text-xs md:text-sm">{{ article.category }}</p>
                        }
                    </div>
                </div>
            </div>
            @if (!article.image_url && showFooter) {
            <button
                class="w-8 h-8 rounded-full bg-[var(--bg-2)] hover:bg-[var(--accent-soft)] flex items-center justify-center transition-colors"
                (click)="onClose()">
                <i class="pi pi-times"></i>
            </button>
            }
        </div>

        <!-- Excerpt -->
        @if (article.excerpt) {
        <p class="text-base md:text-lg text-[var(--text-0)] mt-4 leading-relaxed">{{ article.excerpt }}</p>
        }
    </div>

    <!-- Content -->
    <div class="p-4 md:p-6 space-y-4 md:space-y-6" [class.pb-24]="showFooter">
        <!-- Allowed Items -->
        @if (article.allowed && article.allowed.length > 0) {
        <div class="bg-green-500/10 border border-green-500/20 rounded-xl p-4 md:p-5">
            <h3 class="font-semibold text-base md:text-lg mb-3 flex items-center gap-2 text-green-400">
                <i class="pi pi-check-circle"></i>
                Får sorteras här
            </h3>
            <ul class="space-y-2">
                @for (item of article.allowed; track item) {
                <li class="flex items-start gap-2 text-sm md:text-base text-[var(--text-0)]">
                    <i class="pi pi-check text-green-400 mt-1 flex-shrink-0 text-xs"></i>
                    <span>{{ item }}</span>
                </li>
                }
            </ul>
        </div>
        }

        <!-- Not Allowed Items -->
        @if (article.not_allowed && article.not_allowed.length > 0) {
        <div class="bg-red-500/10 border border-red-500/20 rounded-xl p-4 md:p-5">
            <h3 class="font-semibold text-base md:text-lg mb-3 flex items-center gap-2 text-red-400">
                <i class="pi pi-times-circle"></i>
                Får INTE sorteras här
            </h3>
            <ul class="space-y-2">
                @for (item of article.not_allowed; track item) {
                <li class="flex items-start gap-2 text-sm md:text-base text-[var(--text-0)]">
                    <i class="pi pi-times text-red-400 mt-1 flex-shrink-0 text-xs"></i>
                    <span>{{ item }}</span>
                </li>
                }
            </ul>
        </div>
        }

        <!-- Tips -->
        @if (article.tips && article.tips.length > 0) {
        <div class="bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 md:p-5">
            <h3 class="font-semibold text-base md:text-lg mb-3 flex items-center gap-2 text-blue-400">
                <i class="pi pi-lightbulb"></i>
                Praktiska tips
            </h3>
            <ul class="space-y-2">
                @for (tip of article.tips; track tip) {
                <li class="flex items-start gap-2 text-sm md:text-base text-[var(--text-0)]">
                    <i class="pi pi-arrow-right text-blue-400 mt-1 flex-shrink-0 text-xs"></i>
                    <span>{{ tip }}</span>
                </li>
                }
            </ul>
        </div>
        }

        <!-- Why Text / Environmental Impact -->
        @if (article.why_text) {
        <div class="bg-purple-500/10 border border-purple-500/20 rounded-xl p-4 md:p-5">
            <h3 class="font-semibold text-base md:text-lg mb-3 flex items-center gap-2 text-purple-400">
                <i class="pi pi-globe"></i>
                Därför är det viktigt
            </h3>
            <p class="text-sm md:text-base text-[var(--text-0)] leading-relaxed">{{ article.why_text }}</p>
        </div>
        }

        <!-- Common Mistakes -->
        @if (article.common_mistakes) {
        <div class="bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-4 md:p-5">
            <h3 class="font-semibold text-base md:text-lg mb-3 flex items-center gap-2 text-yellow-400">
                <i class="pi pi-exclamation-triangle"></i>
                Vanliga fel
            </h3>
            <p class="text-sm md:text-base text-[var(--text-0)] leading-relaxed">{{ article.common_mistakes }}</p>
        </div>
        }
    </div>

    <!-- Footer (Sticky) -->
    @if (showFooter) {
    <div
        class="fixed bottom-0 left-0 right-0 p-4 md:p-6 border-t border-[var(--border-0)] bg-[var(--bg-1)] flex justify-end gap-3">
        <button class="btn btn--secondary text-sm md:text-base" (click)="onClose()">
            <i class="pi pi-times"></i>
            Stäng
        </button>
        <a routerLink="/stationer" class="btn btn--primary text-sm md:text-base" (click)="onClose()">
            <i class="pi pi-map-marker"></i>
            Hitta station
        </a>
    </div>
    }
</div>